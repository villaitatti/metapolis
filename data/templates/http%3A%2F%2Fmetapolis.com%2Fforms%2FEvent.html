<semantic-form
  persistence='{"type": "sparql", "targetInsertGraphIri": "http://www.researchspace.org/resource/g/data", "repository":"default"}'
  new-subject-template='http://metapolis.com/resource/event/{{{{raw}}}}{{UUID}}{{{{/raw}}}}'
  fields='[[
    fieldDefinitions
    type                                    = "http://www.w3.org/2000/01/rdf-schema#type"
    has_type                                = "http://www.cidoc-crm.org/cidoc-crm/P2_has_type"
    has_label                               = "http://www.w3.org/2000/01/rdf-schema#label"

    entity_is_domain_of_relation_source     = "http://www.researchspace.org/pattern/entity_is_domain_of_relation_source"
    entity_is_range_of_relation_source      = "http://www.researchspace.org/pattern/entity_is_range_of_relation_source"
    entity_is_domain_of_relation_event      = "http://www.researchspace.org/pattern/entity_is_domain_of_relation_event"
    entity_is_range_of_relation_event       = "http://www.researchspace.org/pattern/entity_is_range_of_relation_event"
    entity_is_domain_of_relation_person     = "http://www.researchspace.org/pattern/entity_is_domain_of_relation_person"
    entity_is_range_of_relation_person      = "http://www.researchspace.org/pattern/entity_is_range_of_relation_person"
    entity_is_domain_of_relation_building   = "http://www.researchspace.org/pattern/entity_is_domain_of_relation_building"
    entity_is_range_of_relation_building    = "http://www.researchspace.org/pattern/entity_is_range_of_relation_building"
  ]]'
  [[> rsp:FormDefaults]]
>

  <semantic-form-hidden-input for="type" default-values='["http://metapolis.com#Event"]'></semantic-form-hidden-input>
  <semantic-form-hidden-input for="has_type" default-value="http://metapolis.com/resource/type/Event"></semantic-form-hidden-input>

  <div class="form-scroll-area">
    <div class="container-fluid">
      
      <div class="page-header">
        <h1>Create New Event</h1>
        <p class="lead">Enter information about a historical event or occurrence</p>
      </div>

      <bs-row>
        <bs-col md="12" sm="12">
          <div id="event_title">
            <semantic-form-text-input 
              label="Title" 
              placeholder="Enter the event title..." 
              for="has_label"
              description="The name or title of the historical event">
            </semantic-form-text-input>
          </div>
        </bs-col>
      </bs-row>

      <bs-row>
        <bs-col md="12" sm="12">
          <div id="event_description">
            <semantic-form-textarea-input 
              label="Description" 
              placeholder="Enter a detailed description of the event..." 
              for="event_description"
              rows="6"
              description="A comprehensive description of what happened during this event">
            </semantic-form-textarea-input>
          </div>
        </bs-col>
      </bs-row>

      <bs-tabs id="entity_relation_tabs" default-active-key="11">

        <bs-tab event-key="11" title="Buildings">
          <bs-row>
            <bs-col lg="6">

              <strong>Outgoing relations</strong>

              <semantic-form-composite-input
                label="Outgoing relation"
                render-header="false"
                for="entity_is_domain_of_relation_building"
                new-subject-template="https://metapolis.com/resource/relation/{{{{raw}}}}{{UUID}}{{{{/raw}}}}"
                parent-subject="{{subject}}"
                fields='[[ fieldDefinitions
                type                                    = "http://www.w3.org/2000/01/rdf-schema#type"
                has_label                               = "http://www.w3.org/2000/01/rdf-schema#label"
                relation_has_range_building             = "http://www.researchspace.org/pattern/relation_has_range_building"
                ]]'
              >

              
              <semantic-form-hidden-input for="type" default-value='http://metapolis.com#Relation'></semantic-form-hidden-input>

                <bs-row>
                  <bs-col lg-offset="4" lg="4">
                    <semantic-form-drag-and-drop-input
                      for='relation_has_range_building'
                      placeholder-item-template="
                        <div class='image-uploader'>
                          <div><rs-icon icon-type='rounded' icon-name='Build' class='upload_icon' symbol='true'></rs-icon></div>
                          <div>Drag and Drop a building from another frame or</div>
                          <div><span class='text-link'>click to create a new Building.</span></div>
                        </div>"
                      nested-form-template='{{{{raw}}}}{{> metapolis_forms:Building nested=true editable=true mode="new" }}{{{{/raw}}}}'
                      label="Building">
                    </semantic-form-drag-and-drop-input>
                  </bs-col>
                </bs-row>

                <bs-row>
                  <bs-col lg="12" md="12">
                    <semantic-form-text-input label="Notes" for="has_label"></semantic-form-text-input>
                  </bs-col>
                </bs-row>
              
              </semantic-form-composite-input>

            </bs-col>

            <bs-col lg="6">

              <strong>Incoming relations</strong>

              <semantic-form-composite-input
                label="Incoming relation"
                render-header="false"
                for="entity_is_range_of_relation_building"
                new-subject-template="https://metapolis.com/resource/relation/{{{{raw}}}}{{UUID}}{{{{/raw}}}}"
                parent-subject="{{subject}}"
                fields='[[ fieldDefinitions
                type                                    = "http://www.w3.org/2000/01/rdf-schema#type"
                has_label                               = "http://www.w3.org/2000/01/rdf-schema#label"
                relation_has_domain_building            = "http://www.researchspace.org/pattern/relation_has_domain_building"
                ]]'
              >

              
              <semantic-form-hidden-input for="type" default-value='http://metapolis.com#Relation'></semantic-form-hidden-input>

                <bs-row>
                  <bs-col lg-offset="4" lg="4">
                    <semantic-form-drag-and-drop-input
                      for='relation_has_domain_building'
                      placeholder-item-template="
                        <div class='image-uploader'>
                          <div><rs-icon icon-type='rounded' icon-name='Build' class='upload_icon' symbol='true'></rs-icon></div>
                          <div>Drag and Drop a building from another frame or</div>
                          <div><span class='text-link'>click to create a new Building.</span></div>
                        </div>"
                      nested-form-template='{{{{raw}}}}{{> metapolis_forms:Building nested=true editable=true mode="new" }}{{{{/raw}}}}'
                      label="Building">
                    </semantic-form-drag-and-drop-input>
                  </bs-col>
                </bs-row>

                <bs-row>
                  <bs-col lg="12" md="12">
                    <semantic-form-text-input label="Notes" for="has_label"></semantic-form-text-input>
                  </bs-col>
                </bs-row>
              
              </semantic-form-composite-input>

            </bs-col>

          </bs-row>

        </bs-tab>

        <bs-tab event-key="12" title="People">
          <bs-row>
            <bs-col lg="6">

              <strong>Outgoing relations</strong>

              <semantic-form-composite-input
                label="Outgoing relation"
                render-header="false"
                for="entity_is_domain_of_relation_person"
                new-subject-template="https://metapolis.com/resource/relation/{{{{raw}}}}{{UUID}}{{{{/raw}}}}"
                parent-subject="{{subject}}"
                fields='[[ fieldDefinitions
                  type                                    = "http://www.w3.org/2000/01/rdf-schema#type"
                  has_label                               = "http://www.w3.org/2000/01/rdf-schema#label"
                  relation_has_range_person               = "http://www.researchspace.org/pattern/relation_has_range_person"
                ]]'
              >
              
              <semantic-form-hidden-input for="type" default-value='http://metapolis.com#Relation'></semantic-form-hidden-input>

                <bs-row>
                  <bs-col lg-offset="4" lg="4">
                    <semantic-form-drag-and-drop-input
                      for='relation_has_range_person'
                      placeholder-item-template="
                        <div class='image-uploader'>
                          <div><rs-icon icon-type='rounded' icon-name='Person' class='upload_icon' symbol='true'></rs-icon></div>
                          <div>Drag and Drop a person from another frame or</div>
                          <div><span class='text-link'>click to create a new Person.</span></div>
                        </div>"
                      nested-form-template='{{{{raw}}}}{{> metapolis_forms:Person nested=true editable=true mode="new" }}{{{{/raw}}}}'
                      label="Person">
                    </semantic-form-drag-and-drop-input>
                  </bs-col>
                </bs-row>

                <bs-row>
                  <bs-col lg="12" md="12">
                    <semantic-form-text-input label="Notes" for="has_label"></semantic-form-text-input>
                  </bs-col>
                </bs-row>
              
              </semantic-form-composite-input>

            </bs-col>

            <bs-col lg="6">

              <strong>Incoming relations</strong>

              <semantic-form-composite-input
                label="Incoming relation"
                render-header="false"
                for="entity_is_range_of_relation_person"
                new-subject-template="https://metapolis.com/resource/relation/{{{{raw}}}}{{UUID}}{{{{/raw}}}}"
                parent-subject="{{subject}}"
                fields='[[ fieldDefinitions
                  type                                    = "http://www.w3.org/2000/01/rdf-schema#type"
                  has_label                               = "http://www.w3.org/2000/01/rdf-schema#label"
                  relation_has_domain_person              = "http://www.researchspace.org/pattern/relation_has_domain_person"
                ]]'
              >
              
              <semantic-form-hidden-input for="type" default-value='http://metapolis.com#Relation'></semantic-form-hidden-input>

                <bs-row>
                  <bs-col lg-offset="4" lg="4">
                    <semantic-form-drag-and-drop-input
                      for='relation_has_domain_person'
                      placeholder-item-template="
                        <div class='image-uploader'>
                          <div><rs-icon icon-type='rounded' icon-name='Person' class='upload_icon' symbol='true'></rs-icon></div>
                          <div>Drag and Drop a person from another frame or</div>
                          <div><span class='text-link'>click to create a new Person.</span></div>
                        </div>"
                      nested-form-template='{{{{raw}}}}{{> metapolis_forms:Person nested=true editable=true mode="new" }}{{{{/raw}}}}'
                      label="Person">
                    </semantic-form-drag-and-drop-input>
                  </bs-col>
                </bs-row>

                <bs-row>
                  <bs-col lg="12" md="12">
                    <semantic-form-text-input label="Notes" for="has_label"></semantic-form-text-input>
                  </bs-col>
                </bs-row>
              
              </semantic-form-composite-input>

            </bs-col>

          </bs-row>

        </bs-tab>

        <bs-tab event-key="13" title="Sources">
          <bs-row>
            <bs-col lg="6">

              <strong>Outgoing relations</strong>

              <semantic-form-composite-input
                label="Outgoing relation"
                render-header="false"
                for="entity_is_domain_of_relation_source"
                new-subject-template="https://metapolis.com/resource/relation/{{{{raw}}}}{{UUID}}{{{{/raw}}}}"
                parent-subject="{{subject}}"
                fields='[[ fieldDefinitions
                  type                                    = "http://www.w3.org/2000/01/rdf-schema#type"
                  has_label                               = "http://www.w3.org/2000/01/rdf-schema#label"
                  relation_has_range_source               = "http://www.researchspace.org/pattern/relation_has_range_source" 
                ]]'
              >
              
              <semantic-form-hidden-input for="type" default-value='http://metapolis.com#Relation'></semantic-form-hidden-input>

                <bs-row>
                  <bs-col lg-offset="4" lg="4">
                    <semantic-form-drag-and-drop-input
                      for='relation_has_range_source'
                      placeholder-item-template="
                        <div class='image-uploader'>
                          <div><rs-icon icon-type='rounded' icon-name='Source' class='upload_icon' symbol='true'></rs-icon></div>
                          <div>Drag and Drop a source from another frame or</div>
                          <div><span class='text-link'>click to create a new Source.</span></div>
                        </div>"
                      nested-form-template='{{{{raw}}}}{{> metapolis_forms:Source nested=true editable=true mode="new" }}{{{{/raw}}}}'
                      label="Source">
                    </semantic-form-drag-and-drop-input>
                  </bs-col>
                </bs-row>

                <bs-row>
                  <bs-col lg="12" md="12">
                    <semantic-form-text-input label="Notes" for="has_label"></semantic-form-text-input>
                  </bs-col>
                </bs-row>
              
              </semantic-form-composite-input>

            </bs-col>

            <bs-col lg="6">

              <strong>Incoming relations</strong>

              <semantic-form-composite-input
                label="Incoming relation"
                render-header="false"
                for="entity_is_range_of_relation_source"
                new-subject-template="https://metapolis.com/resource/relation/{{{{raw}}}}{{UUID}}{{{{/raw}}}}"
                parent-subject="{{subject}}"
                fields='[[ fieldDefinitions
                  type                                    = "http://www.w3.org/2000/01/rdf-schema#type"
                  has_label                               = "http://www.w3.org/2000/01/rdf-schema#label"
                  relation_has_domain_source               = "http://www.researchspace.org/pattern/relation_has_domain_source" 
                ]]'
              >

              
              <semantic-form-hidden-input for="type" default-value='http://metapolis.com#Relation'></semantic-form-hidden-input>

                <bs-row>
                  <bs-col lg-offset="4" lg="4">
                    <semantic-form-drag-and-drop-input
                      for='relation_has_domain_source'
                      placeholder-item-template="
                        <div class='image-uploader'>
                          <div><rs-icon icon-type='rounded' icon-name='Source' class='upload_icon' symbol='true'></rs-icon></div>
                          <div>Drag and Drop a source from another frame or</div>
                          <div><span class='text-link'>click to create a new Source.</span></div>
                        </div>"
                      nested-form-template='{{{{raw}}}}{{> metapolis_forms:Source nested=true editable=true mode="new" }}{{{{/raw}}}}'
                      label="Source">
                    </semantic-form-drag-and-drop-input>
                  </bs-col>
                </bs-row>

                <bs-row>
                  <bs-col lg="12" md="12">
                    <semantic-form-text-input label="Notes" for="has_label"></semantic-form-text-input>
                  </bs-col>
                </bs-row>
              
              </semantic-form-composite-input>

            </bs-col>

          </bs-row>

        </bs-tab>

        
      </bs-tabs>

    </div>
  </div>

  <semantic-form-errors></semantic-form-errors>

[[> rsp:FormDefaultActions formEntity='{{#if entityType}}{{entityType}}{{else}}Metapolis Event{{/if}}']]

</semantic-form>

