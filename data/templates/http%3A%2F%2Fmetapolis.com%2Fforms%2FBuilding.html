<semantic-form
  persistence='{"type": "sparql", "targetInsertGraphIri": "http://www.researchspace.org/resource/g/data", "repository":"default"}'
  new-subject-template='https://metapolis.com/resource/building/{{{{raw}}}}{{UUID}}{{{{/raw}}}}'
  fields='[
    {
      "iri" : "http://www.w3.org/1999/02/22-rdf-syntax-ns#type",
      "deletePattern" : "DELETE { \n    $subject <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> $value\n  } WHERE { $subject <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> $value }",
      "selectPattern" : "SELECT DISTINCT ?value WHERE {\n    $subject <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> ?value.\n  }",
      "xsdDatatype" : "http://www.w3.org/2001/XMLSchema#anyURI",
      "domain" : [ "http://www.cidoc-crm.org/cidoc-crm/E1_CRM_Entity" ],
      "range" : [ "http://www.w3.org/2000/01/rdf-schema#Class" ],
      "defaultValues" : [ ],
      "id" : "type",
      "label" : "rdf type",
      "insertPattern" : "INSERT { \n    $subject <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> $value\n    } WHERE {}",
      "order" : 0
    },
    {
      "iri" : "http://www.researchspace.org/resource/system/authority_manager/for_P2_has_type",
      "deletePattern" : "DELETE { $subject <http://www.researchspace.org/resource/system/authority_manager/for_P2_has_type> $value } WHERE { $subject <http://www.researchspace.org/resource/system/authority_manager/for_P2_has_type> $value }",
      "selectPattern" : "SELECT ?value WHERE {\n  $subject <http://www.researchspace.org/resource/system/authority_manager/for_P2_has_type> ?value.\n}",
      "range" : [ "http://www.cidoc-crm.org/cidoc-crm/E55_Type" ],
      "label" : "for P2",
      "insertPattern" : "INSERT { $subject <http://www.researchspace.org/resource/system/authority_manager/for_P2_has_type> $value} WHERE {}",
      "treePatterns" : {
        "type" : "simple",
        "schemePattern" : "?item a crm:E55_Type .",
        "relationPattern" : "?item crm:P127_has_broader_term ?parent ."
      },
      "xsdDatatype" : "http://www.w3.org/2001/XMLSchema#anyURI",
      "domain" : [ "http://www.cidoc-crm.org/cidoc-crm/E73_Information_Object" ],
      "defaultValues" : [ ],
      "maxOccurs" : "1",
      "id" : "has_type",
      "order" : 0
    },                       
    {
      "iri" : "http://www.researchspace.org/pattern/general/rdfs:label",
      "deletePattern" : "DELETE { $subject <http://www.w3.org/2000/01/rdf-schema#label> $value } WHERE { $subject <http://www.w3.org/2000/01/rdf-schema#label> $value }",
      "selectPattern" : "SELECT ?value WHERE {\n  $subject <http://www.w3.org/2000/01/rdf-schema#label> ?value.\n}",
      "minOccurs" : "1",
      "range" : [ ],
      "label" : "has label",
      "insertPattern" : "INSERT { $subject <http://www.w3.org/2000/01/rdf-schema#label> $value} WHERE {}",
      "xsdDatatype" : "http://www.w3.org/2001/XMLSchema#string",
      "domain" : [ "http://www.cidoc-crm.org/cidoc-crm/E1_CRM_Entity" ],
      "defaultValues" : [ ],
      "maxOccurs" : "1",
      "id" : "has_label",
      "order" : 0
    },
    {
      "iri" : "http://www.researchspace.org/pattern/system/entity/formRecord",
      "deletePattern" : "DELETE { \n  $subject crm:P129i_is_subject_of $value .\n  $value crm:P129_is_about $subject .\n} WHERE { \n  $subject crm:P129i_is_subject_of $value .\n  $value crm:P129_is_about $subject .\n  $value a crmdig:D1_Digital_Object .\n  $value crm:P2_has_type <http://www.researchspace.org/resource/system/vocab/resource_type/entity_form_record> .  \n}",
      "selectPattern" : "SELECT DISTINCT ?value WHERE {\n  $subject crm:P129i_is_subject_of $value .\n  $value a crmdig:D1_Digital_Object .\n  $value crm:P2_has_type <http://www.researchspace.org/resource/system/vocab/resource_type/entity_form_record> .  \n}",
      "minOccurs" : "1",
      "range" : [ "http://www.cidoc-crm.org/extensions/crmdig/D1_Digital_Object" ],
      "label" : "Entity form record",
      "insertPattern" : "INSERT { \n  $subject crm:P129i_is_subject_of $value .\n  $value crm:P129_is_about $subject .\n} WHERE {}",
      "xsdDatatype" : "http://www.w3.org/2001/XMLSchema#anyURI",
      "domain" : [ "http://www.cidoc-crm.org/cidoc-crm/E1_CRM_Entity" ],
      "defaultValues" : [ ],
      "maxOccurs" : "1",
      "id" : "entity_formRecord",
      "order" : 0
    },                                              
    {
      "id": "building_name",
      "label": "Name",
      "insertPattern": "INSERT { $subject <http://metapolis.com/ontology/building_name> $value } WHERE {}",
      "selectPattern": "SELECT $value WHERE { $subject <http://metapolis.com/ontology/building_name> $value }",
      "deletePattern": "DELETE { $subject <http://metapolis.com/ontology/building_name> $value } WHERE { $subject <http://metapolis.com/ontology/building_name> $value }"
    },
    {
      "id": "building_function",
      "label": "Function",
      "insertPattern": "INSERT { $subject <http://metapolis.com/ontology/building_function> $value } WHERE {}",
      "selectPattern": "SELECT $value WHERE { $subject <http://metapolis.com/ontology/building_function> $value }",
      "deletePattern": "DELETE { $subject <http://metapolis.com/ontology/building_function> $value } WHERE { $subject <http://metapolis.com/ontology/building_function> $value }"
    },
    {
      "id": "building_coordinates",
      "label": "Coordinates",
      "insertPattern": "INSERT { $subject <http://metapolis.com/ontology/building_coordinates> $value } WHERE {}",
      "selectPattern": "SELECT $value WHERE { $subject <http://metapolis.com/ontology/building_coordinates> $value }",
      "deletePattern": "DELETE { $subject <http://metapolis.com/ontology/building_coordinates> $value } WHERE { $subject <http://metapolis.com/ontology/building_coordinates> $value }"
    },
    {
      "id": "building_description",
      "label": "Description",
      "insertPattern": "INSERT { $subject <http://metapolis.com/ontology/building_description> $value } WHERE {}",
      "selectPattern": "SELECT $value WHERE { $subject <http://metapolis.com/ontology/building_description> $value }",
      "deletePattern": "DELETE { $subject <http://metapolis.com/ontology/building_description> $value } WHERE { $subject <http://metapolis.com/ontology/building_description> $value }"
    }
  ]'
>


  <semantic-form-errors></semantic-form-errors>

  <semantic-form-hidden-input for="type" default-values='["http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object"]'></semantic-form-hidden-input>
  <semantic-form-hidden-input for="has_type" default-value="http://metapolis.com/resource/type/Building"></semantic-form-hidden-input>

  <div class="form-scroll-area">
    <div class="container-fluid">
      
      
      <div class="page-header">
        <h1>Create New Building</h1>
        <p class="lead">Enter information about a historical building or structure</p>
      </div>

      <bs-tabs class="building-tabs form-main-window" id="building-tabs">
        
        <!-- Basic Information Tab -->
        <bs-tab event-key="1" title="Basic Information">
          
          <bs-row>
            <bs-col md="12" sm="12">
              <div id="building_name">
                <semantic-form-text-input 
                  label="Name" 
                  placeholder="Enter the building name..." 
                  for="building_name"
                  description="The name or title of the building">
                </semantic-form-text-input>
              </div>
            </bs-col>
          </bs-row>

          <bs-row>
            <bs-col md="6" sm="12">
              <div id="building_function">
                <semantic-form-select-input 
                  label="Function" 
                  placeholder="Select the building function..." 
                  for="building_function"
                  description="The primary purpose or use of the building"
                  options='[
                    {"value": "religious", "label": "Religious"},
                    {"value": "government", "label": "Government"},
                    {"value": "cultural", "label": "Cultural"},
                    {"value": "commercial", "label": "Commercial"},
                    {"value": "residential", "label": "Residential"},
                    {"value": "educational", "label": "Educational"},
                    {"value": "military", "label": "Military"},
                    {"value": "industrial", "label": "Industrial"},
                    {"value": "other", "label": "Other"}
                  ]'>
                </semantic-form-select-input>
              </div>
            </bs-col>
            <bs-col md="6" sm="12">
              <div id="building_coordinates">
                <semantic-form-text-input 
                  label="Coordinates" 
                  placeholder="Enter coordinates (e.g., 43.7731, 11.2560)" 
                  for="building_coordinates"
                  description="Geographic coordinates in decimal degrees (latitude, longitude)">
                </semantic-form-text-input>
              </div>
            </bs-col>
          </bs-row>

        </bs-tab>

        <!-- Description Tab -->
        <bs-tab event-key="2" title="Description">
          
          <bs-row>
            <bs-col md="12" sm="12">
              <div id="building_description">
                <semantic-form-textarea-input 
                  label="Description" 
                  placeholder="Enter a detailed description of the building..." 
                  for="building_description"
                  rows="8"
                  description="A comprehensive description of the building's architecture, history, and significance">
                </semantic-form-textarea-input>
              </div>
            </bs-col>
          </bs-row>

        </bs-tab>

        [[> rsp:FormMetadataTab]]

      </bs-tabs>

      <!-- Auto-generate label from name -->
      <semantic-form-hidden-input for="has_label" default-value="{{building_name.value}}"></semantic-form-hidden-input>

    </div>
  </div>


[[> rsp:FormDefaultActions formEntity='{{#if entityType}}{{entityType}}{{else}}Metapolis Building{{/if}}']] 

</semantic-form>

<style>
  .form-scroll-area {
    padding: 20px;
  }
  
  .page-header {
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid #eee;
  }
  
  .page-header h1 {
    color: #2c3e50;
    margin-bottom: 10px;
  }
  
  .page-header .lead {
    color: #7f8c8d;
    margin-bottom: 0;
  }
  
  .building-tabs {
    margin-top: 20px;
  }
  
  .building-tabs .tab-content {
    padding: 20px 0;
  }
  
  .form-actions {
    padding: 20px;
    background-color: #f8f9fa;
    border-top: 1px solid #dee2e6;
    text-align: right;
  }
  
  .form-actions .btn {
    margin-left: 10px;
  }
  
  .semantic-form-text-input,
  .semantic-form-select-input,
  .semantic-form-textarea-input {
    margin-bottom: 20px;
  }
  
  .semantic-form-textarea-input textarea {
    min-height: 150px;
    resize: vertical;
  }
  
  .semantic-form-select-input select {
    width: 100%;
  }
</style>