<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <div class="quickstart-content" style="max-width: 1200px; margin: 0 auto; padding: 20px;">
        
        <h1>Metapolis</h1>

        <div class="alert alert-info" role="alert">
          <strong>Full Documentation:</strong> For comprehensive documentation, visit <a href="https://github.com/villaitatti/metapolis" target="_blank" class="alert-link">https://github.com/villaitatti/metapolis</a>
        </div>

        <h2>Quickstart Guide</h2>

        <p>Get Metapolis up and running in just a few steps:</p>

        <h3>Step 0: Add the app</h3>
        <ol>
          <li>Execute a Researchspace instance</li>
          <li>Add the app to the instance</li>
        </ol>
        <p>See the <a href="https://github.com/researchspace/researchspace" target="_blank">Official RS documentation</a>.</p>

        <h3>Step 1: Import Resource Configurations</h3>
        <ol>
          <li><strong>Navigate to Data Import</strong>: Go to <code>resource/Admin:DataImportExport</code> or click the settings button → "Data Import & Download"</li>
          <li><strong>Download Configuration Files</strong>: Get the files from the <a href="https://github.com/villaitatti/metapolis_setup/tree/main/configurations" target="_blank"><code>metapolis_setup/configurations</code></a> folder</li>
          <li><strong>Import Files</strong>: Upload all three configuration files with "Keep source named graphs" checked:
            <ul>
              <li><code>Metapolis_Ontology.trig</code> (ontology definitions)</li>
              <li><code>Metapolis_Entity.trig</code> (entity configurations)</li>
              <li><code>Metapolis_KP.trig</code> (knowledge patterns/field definitions) - Go to <strong>Settings → Knowledge Patterns</strong> to import this file</li>
            </ul>
          </li>
          <li><strong>Verify Import</strong>: Check the Finder sidebar for Metapolis entities (Event, Person, Building, Source)</li>
        </ol>

        <h3>Step 2: Setup Database</h3>
        <p>Follow the comprehensive database setup guide at <a href="https://github.com/villaitatti/metapolis_setup" target="_blank">metapolis_setup repository</a>:</p>
        <ol>
          <li><strong>Clone the setup repository</strong>:
            <pre><code>git clone https://github.com/villaitatti/metapolis_setup.git
cd metapolis_setup</code></pre>
          </li>
          <li><strong>Follow the database setup instructions</strong> in the repository's README.md:
            <ul>
              <li>Configure environment variables using the <code>.env.template</code></li>
              <li>Launch PostgreSQL with PostGIS using Docker Compose</li>
            </ul>
          </li>
        </ol>

        <h3>Step 3: Test Database Queries</h3>
        <ol>
          <li><strong>Access SPARQL Endpoint</strong>: Navigate to <code>/sparql</code> and select the "metapolis" repository</li>
          <li><strong>Run Test Query</strong>:
            <pre><code>PREFIX rs_sql_sail: &lt;http://www.researchspace.org/resource/system/sql#&gt;
PREFIX metapolis_sql: &lt;http://www.researchspace.org/resource/system/service/metapolis_sql#&gt;

SELECT * WHERE {
  ?s rs_sql_sail:hasQueryId "all_buildings";
     metapolis_sql:building_id ?building_id;
     metapolis_sql:name ?name;
     metapolis_sql:function ?function;
     metapolis_sql:wkt ?wkt
}</code></pre>
          </li>
          <li><strong>Configure Metapolis with Ephedra</strong>: To enable querying Metapolis data from outside the "metapolis" repository:
            <ul>
              <li>Navigate to <strong>System Configurations</strong> → <strong>Repositories</strong></li>
              <li>Find the <code>fedsail:member</code> configuration</li>
              <li>Append this configuration after the last element (note the comma is important):
                <pre><code>, [
      ephedra:delegateRepositoryID "metapolis";
      ephedra:serviceReference &lt;http://www.researchspace.org/resource/system/repository/federation#metapolis&gt;
    ]</code></pre>
              </li>
              <li>Update the configuration to save changes</li>
            </ul>
          </li>
          <li><strong>Test Federated Query</strong>: Now you can query using the <strong>ephedra</strong> repository:
            <pre><code>PREFIX rs_sql_sail: &lt;http://www.researchspace.org/resource/system/sql#&gt;
PREFIX metapolis_sql: &lt;http://www.researchspace.org/resource/system/service/metapolis_sql#&gt;

SELECT * WHERE {
  SERVICE &lt;http://www.researchspace.org/resource/system/repository/federation#metapolis&gt; {
    ?s rs_sql_sail:hasQueryId "all_buildings";
       metapolis_sql:building_id ?building_id;
       metapolis_sql:name ?name;
       metapolis_sql:function ?function;
       metapolis_sql:wkt ?wkt
  }
}</code></pre>
            <p>This federated query allows you to access Metapolis data from outside the "metapolis" repository, enabling broader integration with other data sources in your ResearchSpace instance.</p>
          </li>
        </ol>

        <h3>Step 4: Create new Buildings with Metapolis and connect them to the features in PostGIS</h3>

        <h3>Next steps</h3>
        <ul>
          <li><strong>Create Entities</strong>: Use the Finder sidebar to create new Events, People, Buildings, and Sources</li>
          <li><strong>Visualize Data</strong>: Access map visualization components</li>
          <li><strong>Link Sources</strong>: Connect archival sources to geographical locations</li>
        </ul>

        <h2>Contributing</h2>
        <p>Contributions to Metapolis are welcome! To contribute:</p>
        <ol>
          <li>Fork the repository</li>
          <li>Create a feature branch</li>
          <li>Make your changes</li>
          <li>Submit a pull request</li>
        </ol>
        <p>Please ensure your code follows the project's coding standards and includes appropriate tests.</p>

        <h2>Acknowledgements</h2>
        <p>Funded by the National Endowment for the Humanities (NEH) as part of the Digital Humanities Advancement Grants.</p>
        <p><strong>Project Title:</strong> Metapolis: Spatializing Histories through Archival Sources <a href="https://apps.neh.gov/publicquery/AwardDetail.aspx?gn=HAA-287761-22" target="_blank">[HAA-287761-22]</a></p>
        <p><strong>Project Director:</strong> Lukas Klic</p>
        <p><strong>Project Description:</strong> The creation of geospatial enhancements to an existing digital infrastructure that will allow users to link to other scholarship, generate new research, and publish findings.</p>

        <h2>Technical Specifications</h2>
        <p>For detailed technical specifications and additional documentation, see <a href="https://github.com/villaitatti/metapolis/wiki" target="_blank">the wiki</a>.</p>

        <div class="alert alert-info" role="alert">
          <strong>Detailed Setup Guide:</strong> For comprehensive step-by-step instructions with detailed explanations, see the <a href="DETAILED_SETUP_GUIDE.md" class="alert-link">Detailed Setup Guide</a>.
        </div>

      </div>
    </div>
  </div>
</div>

<style>
.quickstart-content {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  line-height: 1.6;
  color: #333;
  font-size: 16px;
  min-font-size: 16px;
}

.quickstart-content * {
  font-size: inherit;
  min-font-size: 16px;
}

.quickstart-content h1 {
  border-bottom: 3px solid #007bff;
  padding-bottom: 0.5em;
  margin-bottom: 1.5em;
  color: #2c3e50;
  font-weight: 700;
}

.quickstart-content h2 {
  border-bottom: 2px solid #e9ecef;
  padding-bottom: 0.3em;
  margin-top: 2.5em;
  margin-bottom: 1em;
  color: #2c3e50;
  font-weight: 600;
}

.quickstart-content h3 {
  margin-top: 2em;
  margin-bottom: 1em;
  color: #495057;
  font-weight: 600;
}

.quickstart-content pre {
  background-color: #f8f9fa;
  border: 1px solid #e9ecef;
  border-radius: 8px;
  padding: 1rem;
  overflow-x: auto;
  font-size: 0.9rem;
  line-height: 1.4;
}

.quickstart-content code {
  background-color: #f8f9fa;
  border: 1px solid #e9ecef;
  border-radius: 4px;
  font-size: 1.2rem;
  padding: 0.2em 0.4em;
  color: #e83e8c;
}

.quickstart-content pre code {
  background-color: transparent;
  border: none;
  padding: 0;
  color: #495057;
}

.quickstart-content ul, .quickstart-content ol {
  margin-bottom: 1rem;
}

.quickstart-content li {
  margin-bottom: 0.5rem;
}

.quickstart-content .alert {
  border-radius: 8px;
  border: none;
  padding: 1rem 1.25rem;
  margin-bottom: 1.5rem;
}

.quickstart-content .alert-info {
  background-color: #e7f3ff;
  color: #0c5460;
}

.quickstart-content a {
  color: #007bff;
  text-decoration: none;
}

.quickstart-content a:hover {
  text-decoration: underline;
}

.quickstart-content strong {
  font-weight: 600;
}
</style>
